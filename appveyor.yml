environment:
  nodejs_version: "11"

# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node $env:nodejs_version
  # install modules
  # Windows treats warnings as errors apparently, so just allow yarn to run and ignore exit code.
  - cmd: yarn & exit 0
  
branches:
  only:
    - /master|^\d+\.\d+\.\d+$|dev/

# Removing ubuntu builds for the time being because they slow things
# down on Appveyor due to slow VM provisioning. Should move to Travis.
image:
  - Visual Studio 2017

skip_branch_with_pr: true
  
build: off

build_script:
  # Can't run build script with PS, output screws with terminal and triggers error codes.
  - cmd: yarn build:all

cache:
  - node_modules -> yarn.lock
  - C:\Users\appveyor\AppData\Local\Yarn\Cache -> yarn.lock
